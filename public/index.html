<!DOCTYPE html>

<html>
    <head>
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
        <script>
            /**
             * Handles typeahead
             */
             
            function tags(){
                var url = 'tags.php?' + $('#query').val();
                console.log(url);
                $.getJSON(url, function(data) {
                        console.log( "success" );
                    })
                    .done(function(data) {
                        console.log( "second success" );
                        options = "";
                        for (tag in data)
                        {
                            option = "<option value=" + tag + ">";
                            options = options.concat(option);
                        }
                        $('#tag_list').html(options);
                    })
                    .fail(function(error) {
                        console.log("we erred here");
                        console.log( error );
                    })
                    .always(function(data) {
                        console.log( "complete" );
                        console.log("data: ");
                        console.log(data);
                    });
            }
            //when doc is ready...
            $(function(){
                    //do this
                    console.log('hello');
                    tags();
            });
            
            //$(function())

            /**
             * Gets a quote via JSON.
             */
            function question()
            {
                console.log("Started");
                var url = 'question.php'; //+ $('#query').val();
                $.getJSON(url, function(data) {
                    console.log( "success" );
                    })
                    .done(function(data) {
                    console.log( "second success" );
                    $('#question').html(data["key"]);
                    })
                    .fail(function(error) {
                    console.log("we erred here");
                    console.log( error );
                    })
                    .always(function(data) {
                    console.log( "complete" );
                    console.log("data: ");
                    console.log(data);
                    });
                    //console.log("here");
                    //$('#question').html(data[0]);
            }

        </script>
        <title>Quizbank50</title>
    </head>
    <body>
        <!--<form action = "question.php" method = "get">-->
        <form onsubmit="question(); return false;">
            Tag: 
            <!--<input autocomplete="off" autofocus id="query" type="text"/>-->
            
            <!--input field with typeahead-->
            <input id='query' type='text' list='listid'>
                <datalist id='tag_list'>
                   <option value='value1'>
                   <option value='value2'>
                </datalist>
            <br/>
            Question: <span id="question">to be determined</span>
            <br/><br/>
            <input type="submit" value="Get Question"/>
        </form>
    </body>
</html>